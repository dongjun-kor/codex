# 안드로이드 앱 배포 가이드

## 🎯 개요
React 웹 게임 앱을 Capacitor를 사용하여 안드로이드 네이티브 앱으로 성공적으로 변환했습니다.

## 📱 앱 정보
- **앱 ID**: `com.gameapp.mobile`
- **앱 이름**: Game App
- **플랫폼**: Android (API 24+)

## 🔧 필요한 도구 설치

### 1. Android Studio 설치
1. [Android Studio 공식 사이트](https://developer.android.com/studio)에서 다운로드
2. 설치 후 Android SDK, Android SDK Platform-Tools 설치
3. Java JDK 17 이상 설치 필요

### 2. Gradle 환경 설정
```bash
# 환경 변수 설정 (Linux/Mac)
export ANDROID_HOME=$HOME/Android/Sdk
export PATH=$PATH:$ANDROID_HOME/tools
export PATH=$PATH:$ANDROID_HOME/platform-tools
```

## 🏗️ 앱 빌드 과정

### 1. 웹 앱 빌드
```bash
# React 앱 빌드
npm run build

# Capacitor 동기화
npx cap sync android
```

### 2. Android Studio에서 열기
```bash
npx cap open android
```

### 3. APK 빌드
Android Studio에서:
1. **Build** → **Build Bundle(s) / APK(s)** → **Build APK(s)**
2. 또는 터미널에서:
```bash
cd android
./gradlew assembleRelease
```

### 4. 서명된 APK 생성 (배포용)
1. Android Studio에서 **Build** → **Generate Signed Bundle / APK**
2. 키스토어 생성 또는 기존 키스토어 사용
3. Release 모드로 빌드

## 📋 앱 권한 정보
다음 권한들이 설정되어 있습니다:

- **위치 권한**: GPS 기반 기능
- **카메라 권한**: QR 코드 스캔
- **마이크 권한**: 음성 기능
- **진동 권한**: 햅틱 피드백
- **알림 권한**: 푸시 알림
- **백그라운드 위치**: 백그라운드에서 위치 추적

## 🚀 배포 옵션

### Option 1: Google Play Store 배포
1. [Google Play Console](https://play.google.com/console)에서 개발자 계정 생성
2. 새 앱 만들기
3. AAB(Android App Bundle) 업로드:
```bash
cd android
./gradlew bundleRelease
```
4. 앱 정보, 스크린샷, 설명 등 추가
5. 검토 및 출시

### Option 2: 직접 배포 (APK)
1. 서명된 APK 파일 직접 배포
2. 사용자가 "알 수 없는 소스" 허용 후 설치

### Option 3: 내부 테스트
1. Firebase App Distribution 사용
2. 테스터들에게 APK 직접 배포

## 🔍 테스트 방법

### 1. 에뮬레이터 테스트
```bash
# Android 에뮬레이터 실행 후
npx cap run android
```

### 2. 실제 기기 테스트
1. USB 디버깅 활성화
2. 기기 연결 후 실행
```bash
npx cap run android --target [DEVICE_ID]
```

## 🛠️ 추가 설정

### 앱 아이콘 변경
1. `android/app/src/main/res/` 폴더의 `mipmap-*` 폴더에 아이콘 파일 교체
2. 권장 크기: 48x48, 72x72, 96x96, 144x144, 192x192dp

### 스플래시 스크린 커스터마이징
1. `android/app/src/main/res/drawable/` 폴더에 이미지 추가
2. `capacitor.config.ts`에서 SplashScreen 설정 수정

### 앱 이름 변경
`android/app/src/main/res/values/strings.xml`:
```xml
<string name="app_name">게임 앱</string>
```

## 📊 성능 최적화

### 1. ProGuard/R8 활성화
`android/app/build.gradle`:
```gradle
android {
    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
}
```

### 2. APK 크기 최적화
- 사용하지 않는 리소스 제거
- 이미지 압축
- 언어별 APK 분할

## 🐛 문제 해결

### 1. 빌드 오류
```bash
# 캐시 정리
cd android
./gradlew clean

# 의존성 재설치
npm install
npx cap sync android
```

### 2. 권한 오류
- AndroidManifest.xml에서 권한 확인
- 런타임 권한 요청 코드 추가

### 3. 네트워크 오류
- `android:usesCleartextTraffic="true"` 설정 확인
- HTTPS 사용 권장

## 📈 업데이트 배포

1. 웹 앱 수정 후 빌드:
```bash
npm run build
npx cap copy android
```

2. 버전 업데이트:
`android/app/build.gradle`에서 `versionCode`, `versionName` 증가

3. 새 APK/AAB 빌드 및 배포

## 🔐 보안 고려사항

- API 키는 환경 변수로 관리
- ProGuard로 코드 난독화
- SSL Pinning 적용 (필요시)
- 루팅된 기기 탐지 (필요시)

## 📞 지원

문제 발생 시:
1. Android Studio의 Build 로그 확인
2. `adb logcat` 명령으로 디바이스 로그 확인
3. Capacitor 공식 문서 참조

---

✅ **배포 완료!** 이제 안드로이드 앱으로 게임을 즐길 수 있습니다!